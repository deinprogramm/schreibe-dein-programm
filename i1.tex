% Diese Datei ist Teil des Buchs "Schreibe Dein Programm!"
% Das Buch ist lizensiert unter der Creative-Commons-Lizenz
% "Namensnennung - Weitergabe unter gleichen Bedingungen 4.0 International (CC BY-SA 4.0)"
% https://creativecommons.org/licenses/by-sa/4.0/deed.de

\documentclass{tup}

\setstretch{1.2} % 10pt has 12pt baselineskip

\usepackage[utf8]{inputenc}
\usepackage{pifont}
\usepackage{bold-extra}
\usepackage{graphicx}
\usepackage{float}
\usepackage[svgnames]{xcolor}
\usepackage{hhline}
\usepackage{tikz}
\usetikzlibrary{shapes}
\usepackage{pgfplots}
\usepackage{bibgerm}
\usepackage{amssymb}
\usepackage{stmaryrd}
\usepackage{siunitx} % °C
\usepackage{prooftree} % für Regeln im Kalkül...
\usepackage{mdframed}
\usepackage{ntheorem}
\theoremstyle{plain}
\usepackage{thmtools,thm-restate}
\usepackage{amsmath}
\usepackage{eurosym}
\usepackage{alltt}
\usepackage{listings}
\lstset{
  language=SdP
}
\usepackage{verbatim}
\usepackage{fancybox}
\usepackage{tabularx}
\usepackage{url}
\usepackage[matrix,frame,arrow]{xy}
\usepackage{makeidx}
\usepackage{imakeidx}
\usepackage{longtable}
\usepackage{hyperref}
\hypersetup{
  colorlinks = true,
  citecolor=DarkGreen
}
\usepackage{textcomp}
%\usepackage{showframe}

\makeindex[intoc]
\makeindex[intoc,name=variables,title=Index für Variablen]
\newcommand{\indexvariable}[1]{\index[variables]{#1@\texttt{#1}}}
% Diese Datei bitte selbst anlegen mit etwaigen
% \includeonly-Statements.
\input{includeonly}

% from lmodern.sty
% this gives us bold typewriter
\renewcommand{\ttdefault}{lmtt}

\theorembodyfont{\normalfont}
\theoremheaderfont{\normalfont\sffamily\scshape}

\theoremstyle{plain}

\theorembodyfont{\normalfont}
\theoremheaderfont{\normalfont\sffamily\scshape}

\newtheorem{satz}{Satz}[chapter]
\renewcommand{\thesatz}{\thechapter.\arabic{satz}}

\newtheorem{lemma}[satz]{Lemma}
\renewcommand{\thelemma}{\thechapter.\arabic{lemma}}

\newtheorem{korollar}[satz]{Korollar}
\renewcommand{\thekorollar}{\thechapter.\arabic{korollar}}

\theorembodyfont{\normalfont}
\newtheorem{definition}[satz]{Definition}
\renewcommand{\thedefinition}{\thechapter.\arabic{definition}}

\newtheorem{aufgabe}{Aufgabe}[chapter]
\renewcommand{\theaufgabe}{\thechapter.\arabic{aufgabe}}
\newenvironment{aufgabeinline}
 {\aufgabe}
 {\qed\endaufgabe}

\newtheorem{bemerkung}[satz]{Bemerkung}
\renewcommand{\thebemerkung}{\thechapter.\arabic{bemerkung}}

\theorembodyfont{\small\normalfont\fontsize{9pt}{11pt}}
\theoremheaderfont{\small\sffamily\scshape}
\newtheorem{beispiel}[satz]{Beispiel}
\renewcommand{\thebeispiel}{\thechapter.\arabic{beispiel}}

\theorembodyfont{\normalfont}
\theoremheaderfont{\normalfont\sffamily\scshape}

\theoremseparator{\vspace*{-1ex}}
\newtheorem{mantra}{Mantra}%[chapter]

% allow line break in theorem header
% https://tex.stackexchange.com/questions/79145/line-break-in-theorem-header
\makeatletter
\let\nobreakitem\item
\let\@nobreakitem\@item
\patchcmd{\nobreakitem}{\@item}{\@nobreakitem}{}{}
\patchcmd{\nobreakitem}{\@item}{\@nobreakitem}{}{}
\patchcmd{\@nobreakitem}{\@itempenalty}{\@M}{}{}
\patchcmd{\@xthm}{\ignorespaces}{\nobreak\ignorespaces}{}{}
\patchcmd{\@ythm}{\ignorespaces}{\nobreak\ignorespaces}{}{}

\renewtheoremstyle{break}%
  {\item{\theorem@headerfont
          ##1\ ##2\theorem@separator}\hskip\labelsep\relax\nobreakitem}%
  {\item{\theorem@headerfont
          ##1\ ##2\ (##3)\theorem@separator}\hskip\labelsep\relax\nobreakitem}
\makeatother

\theoremstyle{break}
\theoremseparator{}
\newtheorem{xkonstruktionsanleitung}{Konstruktionsanleitung}%[chapter]
\newenvironment{konstruktionsanleitung}[1]
  {\begin{mdframed}[backgroundcolor=lightgray]\begin{xkonstruktionsanleitung}[#1]}%
  {\end{xkonstruktionsanleitung}\end{mdframed}}

\newcommand{\deq}{\stackrel{\rm def}{=}}
\newcommand{\diff}{\stackrel{\rm def}{\Longleftrightarrow}}
\newcommand{\enn}{\mathbb{N}}
\newcommand{\err}{\mathbb{R}}
\newcommand{\kw}[1]{\textbf{\texttt{#1}}}
\newcommand{\lsem}{\llbracket}
\newcommand{\rsem}{\rrbracket}
\newcommand{\zet}{\mathbb{Z}}
\newcommand{\afs}{\char"22}
\newcommand{\backwhack}{\char`\\}
\newcommand{\bang}{\char`!}
\usepackage[roman-theorems]{QED}
\newcommand{\drscheme}{DrRacket}

\def\TheWordProof{\bf Beweis\enskip}

%
%\newtheorem{defn}{Definition}[chapter]
%\newtheorem{bem}[defn]{Bemerkung}
%\newtheorem{bsp}[defn]{Beispiel}
%\newtheorem{dixit}[defn]{Algorithmus}
%\newtheorem{exe}{Aufgabe}[chapter]
%\newtheorem{lemma}[defn]{Lemma}
%\newtheorem{punkt}[defn]{}
%\newtheorem{satz}[defn]{Satz}
%\newtheorem{spec}[defn]{Spezifikation}
%\newtheorem{zus}[defn]{Zusammenfassung}
%

\newenvironment{beweis}{\begin{proof}}{\end{proof}}
%
\newenvironment{loes}[1]{\vspace{1ex}\trivlist\item[\hskip \labelsep {\bf L"osung #1:}\enskip]}%
{\endtrivlist}
%
\newenvironment{labeling}[1]
{%
  \begin{list}{}
  {%
    \settowidth{\labelwidth}{#1}
    \labelsep=1em
    \leftmargin=\labelwidth \advance\leftmargin by \labelsep
    \def\makelabel##1{##1\hfil}
  }%
}%
{%
  \end{list}
}% 

\newcommand{\rfivers}{R$^5$RS}

% Grammar environment

% \frobq will make quote and backquote look nicer.
\def\frobqcats{%\catcode`\'=13
\catcode`\`=13{}}
{\frobqcats
\gdef\frobqdefs{%\def'{\singlequote}
\def`{\backquote}}}
\def\frobq{\frobqcats\frobqdefs}
\newcommand{\cf}{\frenchspacing\frobq\ttfamily}

% Same as \obeycr, but doesn't do a \@gobblecr.
{\catcode`\^^M=13 \gdef\myobeycr{\catcode`\^^M=13 \def^^M{\\}}%
\gdef\restorecr{\catcode`\^^M=5 }}

{\catcode`\^^I=13 \gdef\obeytabs{\catcode`\^^I=13 \def^^I{\hbox{\hskip 4em}}}}

{\obeyspaces\gdef {\hbox{\hskip0.5em}}}

\gdef\gobblecr{\@gobblecr}

\def\setupcode{\@makeother\^}

\newenvironment{grammar}{
  \vspace{-3ex}%
  \def\:{\goesto{}}%
  \def\|{$\vert$}%
  \cf \myobeycr%
  \begin{tabbing}
    %\qquad\quad \= 
    \qquad \= $\vert$ \= \kill
  }{\unskip\end{tabbing}\vspace{-3ex}}

%\newcommand{\unsection}{\unskip}
\newcommand{\unsection}{{\vskip -2ex}}

% Commands for grammars
\newcommand{\arbno}[1]{#1\hbox{\rm*}}  
\newcommand{\atleastone}[1]{#1\hbox{$^+$}}
\newcommand{\maybe}[1]{#1\hbox{$^?$}}

\newcommand{\goesto}{\ensuremath{\rightarrow}}

\newcommand{\meta}[1]{{\noindent\hbox%
  {\textrm{\ensuremath{\langle}#1\ensuremath{\rangle}}}}}

% #### \special{header=lpi90.dvips}

\definecolor{featuregray}{gray}{0.90}

\newsavebox{\featurebox}
\newlength{\featureboxwidth}
\newenvironment{feature}[2]%
{%
  \gdef\featurecaption{#1}
  \gdef\featurelabel{#2}
  \begin{figure}[t]
    \setlength{\featureboxwidth}{\textwidth}
    \addtolength{\featureboxwidth}{-2\fboxsep}
  \begin{lrbox}{\featurebox}
  \begin{minipage}[t]{\featureboxwidth}
}%
{%
  \end{minipage}
  \end{lrbox}
  \noindent
  % \shadowbox{\colorbox{featuregray}{\usebox{\featurebox}}}
  \fcolorbox{black}{featuregray}{\usebox{\featurebox}}
  \caption{\featurecaption}
  \label{\featurelabel}
  \end{figure}
}

\definecolor{linkcodegray}{gray}{0.90}
\newcommand{\linkcode}[1]{\href{https://raw.githubusercontent.com/deinprogramm/schreibe-dein-programm/master/#1}{\texttt{#1}}}
\newcommand{\mentioncode}[1]{\noindent%
  \fcolorbox{black}{linkcodegray}{\parbox{\textwidth - 2\fboxsep}{\linkcode{#1}\hfill{}\textbf{Code}}}%
  \par\medskip\noindent%z
  \hspace*{-\the\fontdimen2\font\space}}
% ^no idea where the space comes from, \ignorespace does not help

\newcommand{\free}{\operatorname{free}}
\newcommand{\bound}{\operatorname{bound}}
\newcommand{\var}{\operatorname{var}}

\newcommand{\evalsto}{\ensuremath{\hookrightarrow}}
\newcommand{\prints}{\ensuremath{\dashrightarrow}}

\newcommand{\valof}[1]{{\(\lceil{}#1\rceil\)}}
\newcommand{\redex}[1]{\(\underline{\texttt{#1}}\)}

% https://tex.stackexchange.com/questions/248886/problem-in-using-lstinline-as-description-item
\makeatletter
\newcommand*{\lstitem}[1][]{%
  \setbox0\hbox\bgroup
    \patchcmd{\lst@InlineM}{\@empty}{\@empty\egroup\item[\usebox0]\leavevmode\ignorespaces}{}{}%
    \lstinline[#1]%
  }
\makeatother

% Gross hacks for proper hyphenation with \lstlisting
\makeatletter
% Allow break after, but not before hyphen
\def\lst@AppendHyphen#1{\lst@Append{-}\lst@Output\lst@letterfalse}
\def\lst@ProcessHyphen{\lst@whitespacefalse \lst@AppendHyphen}
\lst@CCPutMacro
    \lst@ProcessHyphen {"2D}{\lst@ttfamily{-{}}{\textminus}}
    \@empty\z@\@empty

% make open paren a letter component of an identifier
% (does not work for closed paren)
\lst@CCPut \lst@ProcessLetter {"28} \z@

% make closed paren a letter component of an identifier 
\lst@AddToHook{SelectCharTable}
  {\lst@ifbreaklines \lst@Def{`)}{\lst@ProcessLetter)}\fi}
\makeatother

\usepackage{ngerman}

\begin{document}
\setcounter{tocdepth}{1}
\begin{titlepage}
\title{Schreibe Dein Programm!\\{\large Einführung in die Programmierung}}
\author{Michael Sperber \and Herbert Klaeren}
\maketitle
Copyright \textcopyright{} 2007-2023 by Michael
  Sperber and Herbert Klaeren
  
  Dieses Buch ist lizensiert unter der Creative-Commons-Lizenz
  \textit{Namensnennung - Weitergabe unter gleichen Bedingungen 4.0 International (CC BY-SA 4.0)}, nachzulesen
  unter \url{https://creativecommons.org/licenses/by-sa/4.0/deed.de}.
\end{titlepage}

\thispagestyle{empty}

\tableofcontents

\setcounter{page}{1}


\include{i1vorw}

\include{i1pre}

\include{i1prog}

\include{i1verzw}

\include{i1zus}

\include{i1gem}

\include{i1selbst}

\include{i1list}

\include{i1rekzahlen}

\include{i1indu}

\include{i1hop}

\include{i1akku}

\include{i1world}

\include{i1tree}

\include{i1prop}

% WIP:
% \include{datenabstraktion}

% \include{i1rek2}

% \include{i1refinement}

% \include{i1calc}

\include{i1lambda}

\include{i1secd}

\include{nachwort}

% hack to make the author names bold + small caps
\renewcommand{\sc}{\bfseries\scshape}
\bibliography{abbrevs,i1}
\bibliographystyle{geralpha}

\printindex[variables]
\printindex

\end{document}
